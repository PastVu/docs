---
title: API
description: Описание API методов
tags:
  - Development
  - API
sidebar_position: 3
---

# PastVu API

:::info
Для получения фото, необходимо к URL добавить содержимое поля `file` из ответа API метода:
* `https://pastvu.com/_p/d/` для стандартного размера;
* `https://pastvu.com/_p/a/` для оригинального размера;
* `https://pastvu.com/_p/h/` для миниатюры.
:::

Поддерживаются следующие методы:

### photo.giveForPage

Возвращает информацию о фото по его номеру.

Параметр | Обязательный | Тип | Описание |
--- | --- | --- | --- |
cid | ✓ | int | уникальный номер снимка |

**Пример запроса:**

`https://pastvu.com/api2?method=photo.giveForPage&params={"cid":5}`

### comment.giveForObj

Возвращает дерево комментариев по номеру фотографии.

Параметр | Обязательный | Тип | Описание |
--- | --- | --- | --- |
cid | ✓ | int | уникальный номер снимка |

**Пример запроса:**

`https://pastvu.com/api2?method=comment.giveForObj&params={"cid":23314}`

### photo.giveNearestPhotos
Возвращает массив фотографий, ближайших переданной координате. Массив отсортирован по возрастанию расстояния.

Параметр | Обязательный | Тип | По умолчанию | Описание |
--- | --- | --- | --- | --- |
geo | ✓ | array [lat, lon] | | координаты |
except| | int | | исключить `сid` фото из выдачи |
distance| | int | 10000 | максимальное расстояние в метрах (<= 1000км) |
year | | int | | нижняя граница года снимка |
year2 | | int | | верхняя граница года снимка |
type | | string | `photo` | `photo` или `painting` |
limit | | int | 30 | количество запрашиваемых фото (<= 30) |
skip | | int | | пропустить указанное количество фото от начала результата поиска (для страничного вывода) |

**Пример запроса:**

`https://pastvu.com/api2?method=photo.giveNearestPhotos&params={"geo":[37.82,-122.469322],"limit":12,"except":228481}`

### photo.getByBounds

Возвращает фотографии и кластеры на карте по переданному зуму, GeoJSON объекту (Polygon или MultiPolygon) и опциональному ограничению по годам. Последовательность точек в массиве, формирующий полигон, должна следовать против часовой стрелки для выборки объектов внутри его границ (см. [RFC7946 3.1.6](https://www.rfc-editor.org/rfc/rfc7946#section-3.1.6)). Порядок представления координат в точках - `[lon, lat]`. С 17 зума и более возвращаются только фотографии, до 16 включительно могут возвращаться как фото, так и кластеры.

Параметр | Обязательный | Тип | По умолчанию | Описание |
--- | --- | --- | --- | --- |
geometry | ✓ | GeoJSON (Polygon или MultiPolygon) | | область поиска |
z | ✓ | int | | значение зума |
isPainting | | bool | 0 | вернуть в ответе только картины |
year | | int | | нижняя граница года снимка |
year2 | | int | | верхняя граница года снимка |
localWork | | bool | 0 | возвращать массив `photos` (следует установить 1 при значении зума >= 17) |

**Пример запроса:**

`https://pastvu.com/api2?method=photo.getByBounds&params={"z":11,"geometry":{"type":"Polygon","coordinates":[[[37.29034423828125,55.56902805913944],[37.95501708984375,55.56902805913944],[37.95501708984375,55.92150795277898],[37.29034423828125,55.92150795277898],[37.29034423828125,55.56902805913944]]]}}`

